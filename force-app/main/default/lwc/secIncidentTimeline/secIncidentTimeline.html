<template>
    <lightning-card title={label.SECIncidentTimeline} icon-name="standard:timeline">
        <div class="slds-card__body slds-card__body_inner">
            <template lwc:if={hasEvents}>
                <ul class="slds-timeline">
                    <template for:each={sortedEvents} for:item="event">
                        <li key={event.Id} class="slds-timeline__item">
                            <span class="slds-timeline__marker">
                                <lightning-icon
                                    icon-name={event.iconName}
                                    size="x-small"
                                    alternative-text={event.Event_Type__c}>
                                </lightning-icon>
                            </span>
                            <div class="slds-timeline__item_details">
                                <div class="slds-media">
                                    <div class="slds-media__body">
                                        <h3 class="slds-text-heading_small">{event.Event_Type__c}</h3>
                                        <p class="slds-text-body_small slds-m-top_x-small">{event.Description__c}</p>
                                        <p class="slds-text-color_weak slds-m-top_x-small">{event.formattedDate}</p>
                                        <template lwc:if={event.SLA_Status__c}>
                                            <lightning-badge label={event.SLA_Status__c} class="slds-m-top_x-small"></lightning-badge>
                                        </template>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </template>
                </ul>
            </template>
            <template lwc:else>
                <div class="slds-align_absolute-center slds-p-around_large">
                    <p class="slds-text-color_weak">{label.SECNoEvents}</p>
                </div>
            </template>
        </div>
    </lightning-card>
</template>
